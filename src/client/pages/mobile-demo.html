<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a1a">
    <title>Spotify Blind Test Mobile - Demo</title>
    <link rel="stylesheet" href="/styles/mobile.css">
</head>
<body>
    <!-- Aurora Background Effects -->
    <div class="aurora-bg">
        <div class="aurora-wave"></div>
        <div class="aurora-wave"></div>
        <div class="aurora-wave"></div>
    </div>

    <!-- Header fixe avec compte Spotify et options -->
    <header class="mobile-header">
        <div class="spotify-account">
            <img id="mobilePlayerAvatar" src="https://i.scdn.co/image/ab6775700000ee850afe9be4724435a51d4644f8" alt="Spotify Account" class="account-avatar" />
            <div class="account-status">
                <div id="mobilePlayerName" class="account-name">Demo User</div>
                <div class="account-indicator">üü¢</div>
            </div>
        </div>
        
        <button id="mobileOptionsBtn" class="options-button">
            <span class="options-icon">‚öôÔ∏è</span>
        </button>
    </header>

    <!-- Section historique -->
    <section class="history-section">
        <div class="history-header">
            <h3>üìö Historique</h3>
            <div class="history-stats">
                <span class="stat-discovered" id="mobileDiscoveredCount">3</span>/<span class="stat-total" id="mobileTotalCount">5</span>
            </div>
        </div>
        <div class="history-grid" id="mobileHistoryGrid">
            <!-- Exemples d'historique -->
            <div class="history-item discovered">
                <img src="https://i.scdn.co/image/ab67616d00001e029c11e6241d59940a0157c75a" alt="Song 1" />
            </div>
            <div class="history-item discovered">
                <img src="https://i.scdn.co/image/ab67616d00001e02ff9ca10b55ce82ae553c8228" alt="Song 2" />
            </div>
            <div class="history-item missed">
                <img src="https://i.scdn.co/image/ab67616d00001e028863bc11d2aa12b54f5aeb36" alt="Song 3" />
            </div>
            <div class="history-item discovered">
                <img src="https://i.scdn.co/image/ab67616d00001e0255ca8c1c3fbc84e4c76e2a55" alt="Song 4" />
            </div>
            <div class="history-item missed">
                <img src="https://i.scdn.co/image/ab67616d00001e02e319baafd16e84f0408af2a0" alt="Song 5" />
            </div>
        </div>
    </section>

    <!-- Section principale avec thumbnail -->
    <main class="main-section">
        <div class="thumbnail-container" id="mobileThumbnailContainer">
            <div class="thumbnail-glow"></div>
            <img id="mobileThumbnail" src="https://i.scdn.co/image/ab67616d00001e029c11e6241d59940a0157c75a" alt="Album Cover" class="thumbnail" />
            <div class="thumbnail-overlay">
                <div class="mystery-indicator">
                    <span class="mystery-icon">üé≠</span>
                    <span class="mystery-text">Myst√®re</span>
                </div>
            </div>
            <div class="autoswipe-pulse" id="autoswipePulse"></div>
        </div>
        
        <!-- Informations de la chanson -->
        <div class="song-info">
            <div id="mobileSongTitle" class="song-title">üéµ Chanson myst√®re</div>
            <div id="mobileSongArtist" class="song-artist">üé§ Artiste myst√®re</div>
        </div>
    </main>

    <!-- Input fixe en bas -->
    <footer class="input-footer">
        <div class="input-container">
            <!-- Barre de progression autoswipe autour de l'input -->
            <div class="autoswipe-ring" id="autoswipeRing">
                <div class="autoswipe-progress" id="autoswipeProgress"></div>
            </div>
            
            <div class="input-wrapper">
                <input id="mobileSongName" type="text" placeholder="üéØ Tape ta r√©ponse ici..." maxlength="100" autocomplete="off" spellcheck="false" class="song-input" />
                <div class="input-glow"></div>
            </div>
            
            <!-- Temps restant autoswipe -->
            <div class="autoswipe-timer" id="autoswipeTimer" style="display: none;">
                <span id="autoswipeTimeRemaining">10s</span>
            </div>
        </div>
    </footer>

    <!-- Modal Options -->
    <div id="optionsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è Options</h3>
                <button id="closeModal" class="close-button">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="option-item" id="PlaylistDivBtn">
                    <span class="option-icon">üéµ</span>
                    <span class="option-text">Playlist</span>
                </div>
                
                <div class="option-item" id="PlayerDivBtn">
                    <span class="option-icon">üéß</span>
                    <span class="option-text">Lecteur</span>
                </div>
                
                <div class="option-item" id="OptionsDivBtn">
                    <span class="option-icon">‚öôÔ∏è</span>
                    <span class="option-text">Param√®tres</span>
                </div>
                
                <div class="option-item autoswipe-toggle" id="autoswipe">
                    <span class="option-icon">ü§ñ</span>
                    <span class="option-text">AutoSwipe</span>
                    <span id="autoswipeStatus" class="autoswipe-status">‚ñ∂Ô∏è</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Script de d√©monstration -->
    <script src="/scripts/mobile.js"></script>
    <script>
        // Script de d√©monstration pour tester l'interface
        document.addEventListener('DOMContentLoaded', () => {
            // Simuler des donn√©es de test
            setTimeout(() => {
                if (window.mobileAPI) {
                    // Test du message toast
                    window.mobileAPI.showMessage('Interface mobile charg√©e !', 'success');
                    
                    // Test d'une chanson r√©v√©l√©e apr√®s 3 secondes
                    setTimeout(() => {
                        window.mobileAPI.updateSong({
                            thumbnail: 'https://i.scdn.co/image/ab67616d00001e029c11e6241d59940a0157c75a',
                            title: 'Bohemian Rhapsody',
                            artist: 'Queen',
                            showTitle: true,
                            showArtist: true
                        });
                        window.mobileAPI.showMessage('Chanson r√©v√©l√©e !', 'info');
                    }, 3000);
                }
            }, 1000);
            
            // Test de l'autoswipe au clic sur la thumbnail
            const thumbnail = document.getElementById('mobileThumbnailContainer');
            thumbnail.addEventListener('click', () => {
                console.log('Thumbnail cliqu√©e - AutoSwipe toggle');
            });
            
            // Fonctions de test globales
            window.nextSong = () => {
                console.log('Next song triggered by autoswipe');
                if (window.mobileAPI) {
                    window.mobileAPI.showMessage('Chanson suivante !', 'info');
                    // Simuler une nouvelle chanson
                    window.mobileAPI.updateSong({
                        thumbnail: 'https://i.scdn.co/image/ab67616d00001e02ff9ca10b55ce82ae553c8228',
                        title: 'üéµ Nouvelle chanson myst√®re',
                        artist: 'üé§ Nouvel artiste myst√®re',
                        showTitle: false,
                        showArtist: false
                    });
                }
            };
            
            window.checkGuess = (guess) => {
                console.log('Guess submitted:', guess);
                if (window.mobileAPI) {
                    if (guess.toLowerCase().includes('bohemian') || guess.toLowerCase().includes('queen')) {
                        window.mobileAPI.showMessage('Bonne r√©ponse ! üéâ', 'success');
                        window.mobileAPI.addToHistory({
                            thumbnail: 'https://i.scdn.co/image/ab67616d00001e029c11e6241d59940a0157c75a',
                            title: 'Bohemian Rhapsody',
                            artist: 'Queen'
                        }, true);
                    } else {
                        window.mobileAPI.showMessage('Essaie encore ! ü§î', 'error');
                    }
                    window.mobileAPI.clearInput();
                }
            };
        });
    </script>
</body>
</html>
